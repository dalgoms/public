<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebScout Agent</title>
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Toast Notification -->
  <div id="toast" class="toast" role="alert" aria-live="polite">
    <div id="toastIcon" class="toast-icon"></div>
    <p id="toastMessage" class="toast-message"></p>
    <button id="toastClose" class="toast-close" aria-label="Îã´Í∏∞">
    </button>
  </div>

  <!-- Top Header - Theme & Language -->
  <header class="top-header">
    <div class="container">
      <div class="top-header-content">
        <div class="top-header-left"></div>
        <div class="top-header-right">
          <div class="header-controls">
            <button id="themeToggle" class="header-btn" aria-label="Toggle theme">
              <span class="theme-icon-light" id="themeIconLight">‚òÄÔ∏è</span>
              <span class="theme-icon-dark" id="themeIconDark" style="display:none;">üåô</span>
            </button>
            <div class="language-selector">
              <button id="langToggle" class="header-btn" aria-label="Toggle language">
                <span id="langText">ÌïúÍ∏Ä</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- Hero Search Section -->
    <section class="hero">
      <h1 class="hero-title">WebScout Agent</h1>
      <p class="hero-subtitle">AI ÏõπÏóêÏù¥Ï†ÑÌä∏Í∞Ä ÏûêÎèôÏúºÎ°ú Î∞úÍ≤¨ÌïòÍ≥† Î∂ÑÏÑùÌïòÎäî ÏõπÏÇ¨Ïù¥Ìä∏ Ïù∏ÌÖîÎ¶¨Ï†ÑÏä§ ÌîåÎû´Ìèº</p>
      <div class="hero-flow">
        <span>Discover</span>
        <span>‚Üí</span>
        <span>Normalize</span>
        <span>‚Üí</span>
        <span>Structure</span>
        <span>‚Üí</span>
        <span>Export</span>
      </div>
      <div class="hero-search">
        <div style="width:100%;display:flex;flex-direction:column;gap:var(--space-sm);">
          <div style="display:flex;gap:var(--space-md);width:100%;">
            <input id="base" type="url" class="hero-input" placeholder="Ïòà: https://webscout.demo (ÎßÅÌÅ¨Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî)" aria-label="Website URL">
            <button id="btnStart" class="hero-btn" aria-label="Collect URLs">
              <span id="btnStartSpinner" class="progress-spinner" style="display:none;width:16px;height:16px;border-width:2px;margin:0;"></span>
              <span id="btnStartText">Collect URLs</span>
            </button>
          </div>
          <div style="display:flex;align-items:center;gap:var(--space-sm);">
            <button id="btnDemo" class="demo-btn" type="button">
              Use Demo Site
            </button>
            <span id="inputHelper" class="input-helper" style="display:none;"></span>
          </div>
        </div>
      </div>
    </section>

    <!-- Progress Status -->
    <div id="progressStatus" class="progress-status" style="display:none;">
      <div class="progress-spinner"></div>
      <div class="progress-text" id="progressText">Discovering sitemap‚Ä¶</div>
    </div>

    <!-- Filter Bar -->
    <div class="filter-bar">
      <div class="filter-chip" id="depthChip">
        <span>Depth</span>
        <input id="depth" type="number" class="filter-chip-input" min="1" max="10" value="3" aria-label="Depth">
      </div>
      <div class="filter-chip" id="maxChip">
        <span>Max URLs</span>
        <input id="max" type="number" class="filter-chip-input" min="1" max="50000" value="5000" aria-label="Max URLs">
      </div>
      <label class="filter-chip" id="queryChip">
        <input type="checkbox" id="stripQuery" aria-label="Strip query">
        <span>Query Strip</span>
      </label>
      <label class="filter-chip active" id="wwwChip">
        <input type="checkbox" id="allowWwwAlias" checked aria-label="www/non-www alias">
        <span>www/non-www</span>
      </label>
      <div class="filter-chip" id="excludeChip">
        <span>Exclude</span>
        <input id="excludePaths" type="text" class="filter-chip-input filter-chip-text-input" placeholder="/admin,/api" aria-label="Exclude paths">
      </div>
    </div>

    <!-- KPI Summary -->
    <div id="kpiSection" style="display:none;">
      <h2 class="kpi-section-title">Results for today:</h2>
      <div class="kpi-grid">
        <div class="kpi-card accent fade-in">
          <div class="kpi-label">Total URLs</div>
          <div class="kpi-value" id="kpiTotal" aria-live="polite">0</div>
        </div>
        <div class="kpi-card fade-in">
          <div class="kpi-label">Source</div>
          <div class="kpi-value" id="kpiSource" aria-live="polite">-</div>
        </div>
        <div class="kpi-card fade-in">
          <div style="display:flex;align-items:center;gap:var(--space-sm);">
            <div class="kpi-label">Max Depth</div>
          </div>
          <div class="kpi-value" id="kpiDepth" aria-live="polite">-</div>
        </div>
        <div class="kpi-card fade-in">
          <div class="kpi-label">Excluded</div>
          <div class="kpi-value" id="kpiExcluded" aria-live="polite">0</div>
        </div>
      </div>
    </div>

    <!-- Insights Section -->
    <section id="insightsSection" class="card" style="display:none;" role="region" aria-label="Website Insights">
      <div class="insights-header">
        <div class="insights-header-top">
          <h2 class="insights-title">Insights</h2>
        </div>
        <div class="insights-header-bottom">
          <div class="insights-tabs" role="tablist">
            <button class="insight-tab active" data-tab="ai" role="tab" aria-selected="true">AI Insights</button>
            <button class="insight-tab" data-tab="sitemap" role="tab" aria-selected="false">Sitemap View</button>
            <button class="insight-tab" data-tab="types" role="tab" aria-selected="false">Page Types</button>
            <button class="insight-tab" data-tab="figma" role="tab" aria-selected="false">Figma Ready</button>
            <button class="insight-tab" data-tab="importance" role="tab" aria-selected="false">Importance</button>
          </div>
        </div>
      </div>

      <!-- AI Insights Tab -->
      <div id="insightAi" class="insight-content active" role="tabpanel">
        
      <!-- Sitemap View Tab -->
      <div id="insightSitemap" class="insight-content" role="tabpanel" style="display:none;">
        <div id="sitemapTree" class="sitemap-tree"></div>
      </div>

      <!-- Page Types Tab -->
      <div id="insightTypes" class="insight-content" role="tabpanel" style="display:none;">
        <div id="pageTypesList" class="page-types-list"></div>
      </div>

      <!-- Figma Readiness Tab -->
      <div id="insightFigma" class="insight-content" role="tabpanel" style="display:none;">
        <div id="figmaReadiness" class="figma-readiness"></div>
      </div>

      <!-- Importance Tab -->
      <div id="insightImportance" class="insight-content" role="tabpanel" style="display:none;">
        <div id="importanceList" class="importance-list"></div>
      </div>
        <div id="aiInsightsContent" class="ai-insights-content">
          <!-- AI Insights (Enhanced) - Moved to top -->
          <!-- Site Summary -->
          <div id="aiSiteSummary" class="ai-section" style="display:none;">
            <h3 class="ai-section-title">Site Summary</h3>
            <div id="aiSiteSummaryContent" class="ai-summary-grid"></div>
          </div>

          <!-- Funnel Guess -->
          <div id="aiFunnel" class="ai-section" style="display:none;">
            <h3 class="ai-section-title">Funnel Guess</h3>
            <div id="aiFunnelContent" class="ai-funnel-content"></div>
          </div>

          <!-- AI Summary -->
          <div id="aiSummary" class="ai-section" style="display:none;">
            <h3 class="ai-section-title">AI Summary</h3>
            <div id="aiSummaryContent" class="ai-summary-text"></div>
          </div>

          <!-- Gaps -->
          <div id="aiGaps" class="ai-section" style="display:none;">
            <h3 class="ai-section-title">Missing Elements</h3>
            <ul id="aiGapsList" class="ai-list"></ul>
          </div>

          <!-- Recommendations -->
          <div id="aiRecommendations" class="ai-section" style="display:none;">
            <h3 class="ai-section-title">Top Recommendations</h3>
            <div id="aiRecommendationsList" class="ai-recommendations-grid"></div>
          </div>

          <!-- Content Ideas -->
          <div id="aiContentIdeas" class="ai-section" style="display:none;">
            <h3 class="ai-section-title">Content Strategy Ideas</h3>
            <ul id="aiContentIdeasList" class="ai-list"></ul>
          </div>

          <!-- Strategist-Oriented Sections -->
          <div class="strategist-insights">
            <!-- Funnel Health -->
            <div id="strategistFunnelHealth" class="strategist-section">
              <div class="strategist-section-header">
                <h3 class="strategist-section-title">Funnel Health</h3>
                <div class="strategist-score" id="funnelHealthScore">-</div>
              </div>
              <div class="strategist-funnel-viz" id="funnelHealthViz"></div>
              <ul class="strategist-insights-list" id="funnelHealthInsights"></ul>
              <div class="strategist-recommendation" id="funnelHealthRecommendation"></div>
            </div>

            <!-- Design Debt -->
            <div id="strategistDesignDebt" class="strategist-section">
              <div class="strategist-section-header">
                <h3 class="strategist-section-title">Design Debt</h3>
                <div class="strategist-score" id="designDebtScore">-</div>
              </div>
              <ul class="strategist-insights-list" id="designDebtInsights"></ul>
              <div class="strategist-recommendation" id="designDebtRecommendation"></div>
            </div>

            <!-- Content Coverage -->
            <div id="strategistContentCoverage" class="strategist-section">
              <div class="strategist-section-header">
                <h3 class="strategist-section-title">Content Coverage</h3>
                <div class="strategist-score" id="contentCoverageScore">-</div>
              </div>
              <ul class="strategist-insights-list" id="contentCoverageInsights"></ul>
              <div class="strategist-recommendation" id="contentCoverageRecommendation"></div>
            </div>

            <!-- Conversion Readiness -->
            <div id="strategistConversionReadiness" class="strategist-section">
              <div class="strategist-section-header">
                <h3 class="strategist-section-title">Conversion Readiness</h3>
                <div class="strategist-score" id="conversionReadinessScore">-</div>
              </div>
              <ul class="strategist-insights-list" id="conversionReadinessInsights"></ul>
              <div class="strategist-recommendation" id="conversionReadinessRecommendation"></div>
            </div>
          </div>

          <!-- Content Strategy Recommended Pages -->
          <div id="aiContentStrategy" class="ai-section" style="display:none;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-md);">
              <h3 class="ai-section-title">Recommended Pages</h3>
              <button id="btnGenerateContentStrategy" class="btn btn-sm">Generate Content Strategy</button>
            </div>
            <div id="aiContentStrategyList" class="ai-content-strategy-list"></div>
          </div>

          <!-- Landing Page Insights -->
          <div id="aiLandingInsights" class="ai-section" style="display:none;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-md);">
              <h3 class="ai-section-title">Landing Page Feedback</h3>
              <button id="btnGenerateLandingInsights" class="btn btn-sm">Analyze Landing Pages</button>
            </div>
            <div id="aiLandingInsightsContent" class="ai-landing-insights"></div>
          </div>

          <!-- QA Monitor -->
          <div id="aiQAMonitor" class="ai-section" style="display:none;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-md);">
              <h3 class="ai-section-title">QA Status</h3>
              <button id="btnRunQA" class="btn btn-sm">Run QA Check</button>
            </div>
            <div id="aiQAContent" class="ai-qa-content"></div>
          </div>

          <!-- Loading State -->
          <div id="aiLoading" class="ai-loading" style="display:none;">
            <div class="progress-spinner"></div>
            <p id="aiLoadingText">Generating AI insights...</p>
          </div>

          <!-- Error State -->
          <div id="aiError" class="ai-error" style="display:none;">
            <p id="aiErrorMessage"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- URL Table Section -->
    <section id="tableSection" class="card" style="display:none;" role="region" aria-label="URL Î™©Î°ù">
      <div class="table-header">
        <div class="table-title">
          <span>URL List</span>
          <span class="table-count" id="urlCount">(0)</span>
          <span class="selection-info" id="selectionInfo" style="display:none;"></span>
        </div>
        <div class="table-actions">
          <button id="btnAutoSelectDesign" class="btn btn-sm">Auto-select Design Pages</button>
          <button id="btnSelectAll" class="btn btn-sm">Select All</button>
          <button id="btnClearSelection" class="btn btn-sm" style="display:none;">Clear</button>
          <button id="btnTxt" class="btn btn-sm">
            <span>urls.txt</span>
          </button>
          <button id="btnCsv" class="btn btn-sm">
            <span>urls.csv</span>
          </button>
        </div>
      </div>
      <div class="table-search">
        <div class="table-search-wrapper">
          <input id="search" type="text" class="table-search-input" placeholder="Search URLs‚Ä¶" aria-label="Search URLs">
          <span id="searchCount" class="search-count" style="position:absolute;right:var(--space-md);top:50%;transform:translateY(-50%);font-size:var(--text-xs);color:var(--text-muted);display:none;"></span>
        </div>
      </div>
      <div class="table-wrapper">
        <table role="table" aria-label="Discovered URLs">
          <thead>
            <tr>
              <th>
                <input type="checkbox" id="checkAll" title="Select all" aria-label="Select all URLs">
              </th>
              <th class="sortable" data-sort="url">
                URL
              </th>
              <th class="sortable" data-sort="depth" style="text-align:right;">
                Path Depth
              </th>
              <th>Query</th>
              <th>External</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
      <div id="pagination" class="pagination" style="display:none;">
        <div class="pagination-info" id="paginationInfo">1-20 / 0</div>
        <div class="pagination-controls">
          <button id="prevPage" class="btn btn-sm">Previous</button>
          <button id="nextPage" class="btn btn-sm">Next</button>
        </div>
      </div>
    </section>

    <!-- Empty State -->
    <div id="emptyState" class="card empty-state" style="display:none;">
      <svg class="empty-state-icon" viewBox="0 0 64 64" aria-hidden="true" style="width: 64px; height: 64px;">
        <defs>
          <linearGradient id="gradient-search-bot" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#2563EB;stop-opacity:1" />
            <stop offset="50%" style="stop-color:#3B82F6;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#06B6D4;stop-opacity:1" />
          </linearGradient>
          <radialGradient id="bot-glow" cx="50%" cy="50%">
            <stop offset="0%" style="stop-color:#2563EB;stop-opacity:0.2" />
            <stop offset="100%" style="stop-color:#2563EB;stop-opacity:0" />
          </radialGradient>
        </defs>
        <!-- Glow effect -->
        <circle cx="32" cy="32" r="28" fill="url(#bot-glow)"/>
        <!-- Search magnifying glass with animation -->
        <g class="magnifying-glass">
          <circle cx="24" cy="24" r="10" fill="none" stroke="url(#gradient-search-bot)" stroke-width="3" stroke-linecap="round">
            <animateTransform attributeName="transform" type="translate" values="0,0; 2,0; 0,0; -2,0; 0,0" dur="3s" repeatCount="indefinite"/>
          </circle>
          <path d="M32 32 L40 40" stroke="url(#gradient-search-bot)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <animateTransform attributeName="transform" type="translate" values="0,0; 2,0; 0,0; -2,0; 0,0" dur="3s" repeatCount="indefinite"/>
          </path>
        </g>
        <!-- Bot/AI sparkles with enhanced animation -->
        <circle cx="48" cy="20" r="2" fill="#06B6D4" opacity="0.8">
          <animate attributeName="opacity" values="0.8;0.2;0.8" dur="1.5s" repeatCount="indefinite"/>
          <animateTransform attributeName="transform" type="translate" values="0,0; 1,-1; 0,0" dur="2s" repeatCount="indefinite"/>
        </circle>
        <circle cx="52" cy="28" r="1.5" fill="#3B82F6" opacity="0.6">
          <animate attributeName="opacity" values="0.6;0.1;0.6" dur="1.2s" repeatCount="indefinite"/>
          <animateTransform attributeName="transform" type="translate" values="0,0; -1,1; 0,0" dur="1.8s" repeatCount="indefinite"/>
        </circle>
        <circle cx="46" cy="36" r="1.5" fill="#06B6D4" opacity="0.7">
          <animate attributeName="opacity" values="0.7;0.15;0.7" dur="1.6s" repeatCount="indefinite"/>
          <animateTransform attributeName="transform" type="translate" values="0,0; 1.5,0; 0,0" dur="2.2s" repeatCount="indefinite"/>
        </circle>
      </svg>
      <div class="empty-state-title">Ready to scout your website?</div>
      <div class="empty-state-text">Paste any domain and WebScout Agent will map every page automatically.</div>
    </div>

    <!-- Error State -->
    <div id="errorState" class="card" style="display:none;">
      <div class="error-box">
        <div class="error-content">
          <div class="error-title" id="errorTitle">Discovery failed</div>
          <div class="error-message" id="errorMessage"></div>
          <button id="errorRetry" class="btn btn-sm" style="margin-top:var(--space-sm);">Retry</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Footer -->
  <footer class="app-footer">
    <div class="container">
      <div class="footer-content">
        <p class="footer-text">
          <span class="footer-brand">WebScout Agent</span>
          <span class="footer-separator">‚Ä¢</span>
          <span>Built by <span class="footer-name">Seyoung Lee</span></span>
        </p>
        <a href="#" class="footer-github" aria-label="GitHub">
        </a>
      </div>
    </div>
  </footer>
  
  <script src="app.js"></script>
</body>
</html>
